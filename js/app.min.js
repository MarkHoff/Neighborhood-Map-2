function connectFourSquare(){for(i=0;i<markers.length;i++){var e="https://api.foursquare.com/v2/venues/"+markers[i].venueId+"?client_id=YRN5IUY2UOMHO3UYB2FKJYRH4AHJVGBP1SVAPPPGGT31FB2E&client_secret=VHSZ2R1SLQ0I0QB1KZFWU0K2VMBGJIGIDL4P1TYWTDX4OXRM&v=20150504";$.getJSON(e).done(function(e){var i,t,s;t=e.response.venue.id,i=e.response.venue.tips.count>0?e.response.venue.tips.groups[0].items[0].text:"No tips available for this location yet...",s=t+"%"+i,splitTips(s)}).fail(function(e,i){alert("Error connecting to Foursquare: "+i)})}}function splitTips(e){var t=e.split("%");for(i=0;i<markers.length;i++)if(markers[i].venueId===t[0])return void(markers[i].tips=t[1])}function initialize(){function e(){var e=$(window).width();1080>=e?(map.setZoom(14),map.setCenter(i.center)):e>1080&&(map.setZoom(16),map.setCenter(i.center))}var i={center:new google.maps.LatLng(var_location.lat,var_location.lng),zoom:16,mapTypeControl:!1,disableDefaultUI:!0};$(window).width()<=1080&&(i.zoom=13),($(window).width()<850||$(window).height()<595)&&hideNav(),map=new google.maps.Map(document.getElementById("map-canvas"),i),connectFourSquare(),setMarkers(markers),$("#reset").click(function(){e()}),$(window).resize(function(){e()})}function setAllMap(){for(var e=0;e<markers.length;e++)markers[e].holdMarker.setMap(markers[e].boolTest===!0?map:null)}function noNav(){$("#search-nav").animate({height:0},500),setTimeout(function(){$("#search-nav").hide()},500),$("#arrow").attr("src","img/down-arrow.gif"),isNavVisible=!1}function yesNav(){$("#search-nav").show();var e=$("#scroller").height()+55;$(window).height()<600?$("#search-nav").animate({height:e-100},500,function(){$(this).css("height","auto").css("max-height",439)}):$("#search-nav").animate({height:e},500,function(){$(this).css("height","auto").css("max-height",549)}),$("#arrow").attr("src","img/up-arrow.gif"),isNavVisible=!0}function hideNav(){isNavVisible===!0?noNav():yesNav()}var map,var_location={lat:42.0102,lng:-87.6755},streetViewImage,streetViewUrl="https://maps.googleapis.com/maps/api/streetview?size=180x90&location=";google.maps.event.addDomListener(window,"load",initialize);var markers=[{name:"rogersParkSocial",latitude:"42.007407",longitude:"-87.6660",streetAddress:"6922 N. Glenwood Ave",cityAddress:"Chicago, Illinois, 60626",url:"www.rogersparksocial.com",id:"nav0",visible:ko.observable(!0),venueId:"536300da498ee44e63dcbc1d",tips:"Waiting for Foursquare tips...",title:"Rogers Park Social"},{name:"giordanos",latitude:"42.0065706",longitude:"-87.6614",streetAddress:"6836 North Sheridan Road",cityAddress:"Chicago, Illinois, 60626",url:"www.giordanos.com",id:"nav1",visible:ko.observable(!0),venueId:"4a189b92f964a520d0791fe3",tips:"Waiting for Foursquare tips...",title:"Giordano's Pizza"},{name:"mayne_stage",latitude:"42.008259",longitude:"-87.665028",streetAddress:"1328 West Morse Avenue",cityAddress:"Chicago, Illinois, 60626",url:"www.maynestage.com",id:"nav2",visible:ko.observable(!0),venueId:"4b7acc0cf964a520403d2fe3",tips:"Waiting for Foursquare tips...",title:"Mayne Stage"},{name:"los_portales",latitude:"42.0080956",longitude:"-87.6667577",streetAddress:"1418 W Morse Ave",cityAddress:"Chicago, Illinois, 60626",url:"www.losportalesmexicanrestaurantchicago.com",id:"nav3",visible:ko.observable(!0),venueId:"4a91eac3f964a520551c20e3",tips:"Waiting for Foursquare tips...",title:"Los Portales"},{name:"pub_626",latitude:"42.0080956",longitude:"-87.66632",streetAddress:"1406 West Morse Avenue",cityAddress:"Chicago, Illinois, 60626",url:"www.pub626.com",id:"nav4",visible:ko.observable(!0),venueId:"5531bd01498ef49d4df540bb",tips:"Waiting for Foursquare tips...",title:"Pub 626"},{name:"morse_gyros",latitude:"42.00774",longitude:"-87.66542",streetAddress:"1335 West Morse Avenue",cityAddress:"Chicago, Illinois, 60626",url:"www.morsegyroschicken.com",id:"nav5",visible:ko.observable(!0),venueId:"4c268489905a0f478a766360",tips:"Waiting for Foursquare tips...",title:"Morse Gyros"},{name:"sp_kebab",latitude:"42.00563",longitude:"-87.66095",streetAddress:"6808 North Sheridan Road",cityAddress:"Chicago, Illinois, 60626",url:"www.spkebab.com",id:"nav6",visible:ko.observable(!0),venueId:"4d46054c1b62b1f7111203e3",tips:"Waiting for Foursquare tips...",title:"SP Kebab"},{name:"twisted_tapas",latitude:"42.00586",longitude:"-87.66031",streetAddress:"1146 West Pratt Boulevard",cityAddress:"Chicago, Illinois, 60626",url:"plus.google.com/113326649920571028301/about?hl=en-US",id:"nav7",visible:ko.observable(!0),venueId:"524e032011d2486d302806a0",tips:"Waiting for Foursquare tips...",title:"Twisted Tapas"},{name:"la_cazuela",latitude:"42.00730",longitude:"-87.67376",streetAddress:"6922 North Clark Street",cityAddress:"Chicago, Illinois, 60626",url:"www.la-cazuela.com",id:"nav8",visible:ko.observable(!0),venueId:"4b400ac2f964a520b7b425e3",tips:"Waiting for Foursquare tips...",title:"La Cazuela"},{name:"fungs",latitude:"42.00777",longitude:"-87.66557",streetAddress:"1343 West Morse Avenue,",cityAddress:"Chicago, Illinois, 60626",url:"www.fungsmandarin.com",id:"nav9",visible:ko.observable(!0),venueId:"51bbbac3498e47af474f9641",tips:"Waiting for Foursquare tips...",title:"Fung's Mandarin"}],setMarkers=function(e){var t=[];for(i=0;i<e.length;i++){t[i]=new google.maps.LatLng(e[i].latitude,e[i].longitude),e[i].holdMarker=new google.maps.Marker({position:t[i],map:map,title:e[i].title}),e[i].contentString='<img src="'+streetViewUrl+e[i].streetAddress+e[i].cityAddress+'" alt="Street View Image of '+e[i].title+'"><br><hr style="margin-bottom: 5px"><strong>'+e[i].title+"</strong><br><p>"+e[i].tips+"<br>"+e[i].streetAddress+"<br>"+e[i].cityAddress+'<br></p><a class="web-links" href="http://'+e[i].url+'" target="_blank">'+e[i].url+"</a>";var s=new google.maps.InfoWindow({content:e[i].contentString});new google.maps.event.addListener(e[i].holdMarker,"click",function(i,t){return function(){s.setContent('<img src="'+streetViewUrl+e[t].streetAddress+e[t].cityAddress+'" alt="Street View Image of '+e[t].title+'"><br><hr style="margin-bottom: 5px"><strong>'+e[t].title+"</strong><br><p><p><strong>Foursquare Tip:</strong><br></p>"+e[t].tips+"<br><br>"+e[t].streetAddress+"<br>"+e[t].cityAddress+'<br></p><a class="web-links" href="http://'+e[t].url+'" target="_blank">'+e[t].url+"</a>"),s.open(map,this);var r=$(window).width();1080>=r?map.setZoom(20):r>1080&&map.setZoom(20),map.setCenter(i.getPosition()),e[t].picBoolTest=!0}}(e[i].holdMarker,i));var r=$("#nav"+i);r.click(function(i,t){return function(){s.setContent('<img src="'+streetViewUrl+e[t].streetAddress+e[t].cityAddress+'" alt="Street View Image of '+e[t].title+'"><br><hr style="margin-bottom: 5px"><strong>'+e[t].title+"</strong><br><p><p><strong>Foursquare Tip:</strong><br></p>"+e[t].tips+"<br><br>"+e[t].streetAddress+"<br>"+e[t].cityAddress+'<br></p><a class="web-links" href="http://'+e[t].url+'" target="_blank">'+e[t].url+"</a>"),s.open(map,i),map.setZoom(20),map.setCenter(i.getPosition())}}(e[i].holdMarker,i))}},viewModel={query:ko.observable("")};viewModel.markers=ko.dependentObservable(function(){var e=this,i=e.query().toLowerCase();return ko.utils.arrayFilter(markers,function(e){return e.title.toLowerCase().indexOf(i)>=0?(e.boolTest=!0,e.visible(!0)):(e.boolTest=!1,setAllMap(),e.visible(!1))})},viewModel),ko.applyBindings(viewModel),$("#input").keyup(function(){setAllMap()});var isNavVisible=!0;$("#arrow").click(hideNav),$(window).resize(function(){$(window).width();$(window).width()<850&&isNavVisible===!0?noNav():$(window).height()<595&&isNavVisible===!0&&noNav(),$(window).width()>=850&&isNavVisible===!1?$(window).height()>595&&yesNav():$(window).height()>=595&&isNavVisible===!1&&$(window).width()>850&&yesNav()});